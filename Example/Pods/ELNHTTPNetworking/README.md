###Описание  
  
Базовый сетевой слой для работы через HTTP на основе AFNetworking/Mantle/OHHTTPStubs. ELNHTTPClient оборачивает AFHTTPSessionManager и позволяет его настраивать и работать с NSURLSessionDataTask. ELNHTTPStubManager позволяет добавлять заглушки сетевых методов.  
  
###Подключение  
  
Через CocoaPods:  
  
```  
source 'https://github.com/elegion/ios-podspecs.git'  
source 'https://github.com/CocoaPods/Specs.git'  
  
pod 'ELNHTTPNetworking'  
```  
  
###Использование  
  
Для использования всего и сразу есть общий хедер ELNHTTPNetworking.h.  
  
#####Для настройки под конкретный проект:  
1. Создать класс конфигурации клиента, который реализует ELNHTTPClientConfiguration.  
2. При необходимости наследоваться от ELNHTTPClient и реализовать в подклассе протокол ELNHTTPClient.   
3. Создать экземпляр ELNHTTPClient или его подкласса и инициализировать объектом конфигурации.  
  
При необходимости передавать дополнительные параметры инициализации в клиент их нужно добавлять в класс конфигурации, это должен быть единственный параметр, которым инициализируется HTTP Client.  
  
#####Для создания запроса:  
1. Добавить класс, удовлетворяющий протокол ELNHTTPRequest.  
2. При необходимости добавить класс ответа, удовлетворяющий протокол MTLJSONSerializing.  
  
#####Реализация заглушек  
Клиент поддерживает добавление заглушек для запросов. Чтобы включить заглушки, необходимо вернуть экземпляр менеджера моков (реализовать протокол ELNDefaultHTTPStubManager) в ELNHTTPClientConfiguration (метод stubManager).  
   
Есть реализация протокола по умолчанию: ELNDefaultHTTPStubManager. В данной реализации класс заглушки находится по имени запроса с добавлением "Stub" в конце (ELNAnyRequest -> ELNAnyRequestStub). Реализацией по умолчанию поддерживаются типы заглушек: NSString, id\<MTLJSONSerializing>, NSError, OHHTTPStubsResponse, NSArray\<MTLModel *>.  
  
Для определения состояния приложения может потребоваться использовать контексты. Чтобы определить, какую заглушку возвращать, можно определять состояние приложения с помощью контекстов. Для этого нужно передать необходимые данные в stub manager и реализовать метод -contextForRequest:.  
  
#####Кеширование для оффлайн-режима  
Клиент поддерживает кеширование данных и их использование в оффлайн-режиме. Чтобы включить кеширование запроса, нужно:  
1. Вернуть экземпляр менеджера оффлайн-кеша (реализовать протокол ELNHTTPCacheManager) в ELNHTTPClientConfiguration (метод cacheManager).  
2. Вернуть YES в классе запроса в методе isCached.  
3. При необходимости переопределить в классе HTTP Client метод shouldUseCachedResponseForRequest:error:. По умолчанию значение достаётся из кеша при получении стандартных сетевых ошибок.   
  
Есть реализация ELNHTTPCacheManager по умолчанию, использующая PINCache и формирующая ключи из основных полей запроса.  
